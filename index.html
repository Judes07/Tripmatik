<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ã–moÅŸ Tripmatik 2.0</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React ve ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;900&display=swap');
        
        body { font-family: 'Nunito', sans-serif; }
        
        .loading-dots:after {
            content: '.';
            animation: dots 1.5s steps(5, end) infinite;
        }
        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60% { content: '...'; }
            80%, 100% { content: ''; }
        }

        /* Hareketli Arka Plan BalonlarÄ± */
        .blob {
            position: absolute;
            filter: blur(40px);
            z-index: -1;
            opacity: 0.6;
            animation: float 10s infinite alternate;
        }
        .blob-1 { top: 0; left: 0; width: 300px; height: 300px; background: #fecdd3; border-radius: 40% 60% 70% 30% / 40% 50% 60% 50%; }
        .blob-2 { bottom: 0; right: 0; width: 350px; height: 350px; background: #e9d5ff; border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%; animation-delay: -5s; }
        .blob-3 { top: 40%; left: 40%; width: 200px; height: 200px; background: #bfdbfe; border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%; animation-duration: 15s; }

        @keyframes float {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(30px, 50px) rotate(10deg); }
        }

        /* Glassmorphism */
        .glass {
            background: rgba(255, 255, 255, 0.75);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-pink-50 via-white to-purple-50 min-h-screen relative overflow-x-hidden">
    
    <!-- Dekoratif Arka Plan -->
    <div class="blob blob-1"></div>
    <div class="blob blob-2"></div>
    <div class="blob blob-3"></div>

    <!-- YÃ¼kleme EkranÄ± -->
    <div id="root" class="min-h-screen">
        <div class="flex flex-col items-center justify-center min-h-screen text-rose-500">
            <div class="text-3xl font-black mb-2 animate-bounce">Ã–moÅŸ Tripmatik</div>
            <div class="loading-dots text-sm font-bold opacity-75">Sistem hazÄ±rlanÄ±yor</div>
        </div>
    </div>

    <!-- Hata YakalayÄ±cÄ± -->
    <script>
        window.onerror = function(msg, url, line, col, error) {
            const root = document.getElementById('root');
            let friendlyMsg = msg;
            if (msg.includes("Firebase config")) friendlyMsg = "VeritabanÄ± ayarlarÄ± eksik veya hatalÄ±.";
            if (msg.includes("permission-denied")) friendlyMsg = "VeritabanÄ± izni reddedildi.";
            
            root.innerHTML = `
                <div class="flex items-center justify-center min-h-screen p-4">
                    <div class="glass p-6 rounded-3xl shadow-xl max-w-md w-full border-l-4 border-rose-500">
                        <h3 class="text-xl font-bold text-rose-600 mb-2">Ops! Bir Sorun Var</h3>
                        <p class="text-slate-700 mb-4 text-sm">${friendlyMsg}</p>
                        <div class="bg-rose-50 p-3 rounded-lg text-xs text-rose-800 font-mono break-all">
                            ${msg}
                        </div>
                    </div>
                </div>
            `;
            return false;
        };
    </script>

    <!-- Firebase ModÃ¼ller -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, onSnapshot, deleteDoc, updateDoc, doc, query, orderBy, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-analytics.js";

        // =================================================================
        // SENÄ°N FIREBASE AYARLARIN
        // =================================================================
        const SENIN_FIREBASE_AYARLARIN = {
             apiKey: "AIzaSyA9wecBOHX9-qtvjKgu8MPoHEb_ld-LC44",
             authDomain: "trip-64cb9.firebaseapp.com",
            projectId: "trip-64cb9",
            storageBucket: "trip-64cb9.firebasestorage.app",
            messagingSenderId: "580909327374",
            appId: "1:580909327374:web:ce9d449e00d7b23e14885f",
            measurementId: "G-1H5W71PNXY"
        };
        
        let firebaseConfig;
        let activeAppId = 'omos-trip-app';
        let useEnvToken = true;

        try {
            if (SENIN_FIREBASE_AYARLARIN) {
                firebaseConfig = SENIN_FIREBASE_AYARLARIN;
                useEnvToken = false; 
            } else if (typeof __firebase_config !== 'undefined') {
                firebaseConfig = JSON.parse(__firebase_config);
                if (typeof __app_id !== 'undefined') activeAppId = __app_id;
            } else {
                throw new Error("Firebase config bulunamadÄ±.");
            }
        } catch (e) { console.error(e); throw e; }

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        
        try { const analytics = getAnalytics(app); } catch (e) {}

        window.Firebase = {
            auth, db, appId: activeAppId,
            signInAnonymously, signInWithCustomToken, onAuthStateChanged,
            collection, addDoc, onSnapshot, deleteDoc, updateDoc, doc, query, orderBy, serverTimestamp,
            initialToken: (typeof __initial_auth_token !== 'undefined' && useEnvToken) ? __initial_auth_token : null
        };

        window.dispatchEvent(new Event('firebase-ready'));
    </script>

    <!-- React UygulamasÄ± -->
    <script type="text/babel">
        const { useState, useEffect } = React;

        // Ä°konlar
        const Icons = {
            HeartCrack: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/><path d="m12 13-3-3 2-2-1.5-1.5"/></svg>,
            Trash2: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></svg>,
            Zap: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>,
            CheckCircle: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>,
            ChartPie: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21.21 15.89A10 10 0 1 1 8 2.83"/><path d="M22 12A10 10 0 0 0 12 2v10z"/></svg>,
            Smile: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2"/><line x1="9" x2="9.01" y1="9" y2="9"/><line x1="15" x2="15.01" y1="9" y2="9"/></svg>,
            // Eksik ikonlar eklendi
            Plus: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>,
            Sparkles: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 3v4"/><path d="M3 5h4"/><path d="M3 9h4"/></svg>
        };

        const MOODS = [
            { id: 'angry', emoji: 'ðŸ˜¡', label: 'Sinirli', color: 'bg-red-100 border-red-300' },
            { id: 'sad', emoji: 'ðŸ¥º', label: 'KÄ±rgÄ±n', color: 'bg-blue-100 border-blue-300' },
            { id: 'ignored', emoji: 'ðŸ˜’', label: 'Umursamaz', color: 'bg-gray-100 border-gray-300' },
            { id: 'fire', emoji: 'ðŸ”¥', label: 'Alev Alev', color: 'bg-orange-100 border-orange-300' },
            { id: 'cool', emoji: 'ðŸ˜Ž', label: 'Haval', color: 'bg-purple-100 border-purple-300' }
        ];

        function App() {
            const [trips, setTrips] = useState([]);
            const [newReason, setNewReason] = useState("");
            const [newAction, setNewAction] = useState("");
            const [intensity, setIntensity] = useState(5);
            const [selectedMood, setSelectedMood] = useState(MOODS[0]);
            const [user, setUser] = useState(null);
            const [loading, setLoading] = useState(true);

            const fb = window.Firebase;

            useEffect(() => {
                if (!fb) return;
                const initAuth = async () => {
                    try {
                        if (fb.initialToken) await fb.signInWithCustomToken(fb.auth, fb.initialToken);
                        else await fb.signInAnonymously(fb.auth);
                    } catch (err) { console.error("GiriÅŸ hatasÄ±:", err); }
                };
                initAuth();
                const unsubscribe = fb.onAuthStateChanged(fb.auth, (u) => setUser(u));
                return () => unsubscribe();
            }, []);

            useEffect(() => {
                if (!user || !fb) return;
                const q = fb.query(fb.collection(fb.db, 'omos_trips'));
                const unsubscribe = fb.onSnapshot(q, (snapshot) => {
                    const loadedTrips = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                    loadedTrips.sort((a, b) => (b.timestamp?.seconds || 0) - (a.timestamp?.seconds || 0));
                    setTrips(loadedTrips);
                    setLoading(false);
                }, () => setLoading(false));
                return () => unsubscribe();
            }, [user]);

            const handleAddTrip = async () => {
                if (!user) { alert("BaÄŸlantÄ± yok."); return; }
                if (!newReason || !newAction) return;
                
                try {
                    await fb.addDoc(fb.collection(fb.db, 'omos_trips'), {
                        reason: newReason,
                        action: newAction,
                        date: new Date().toLocaleDateString('tr-TR'),
                        intensity: intensity,
                        mood: selectedMood,
                        resolved: false,
                        timestamp: fb.serverTimestamp(),
                        creatorId: user.uid
                    });
                    setNewReason("");
                    setNewAction("");
                    setIntensity(5);
                    setSelectedMood(MOODS[0]);
                } catch (error) { alert("KayÄ±t baÅŸarÄ±sÄ±z: " + error.message); }
            };

            const toggleResolve = async (id, currentStatus) => {
                if(!user) return;
                try {
                    const tripRef = fb.doc(fb.db, 'omos_trips', id);
                    await fb.updateDoc(tripRef, { resolved: !currentStatus });
                } catch (e) { console.error(e); }
            };

            const handleDelete = async (id) => {
                if(!user) return;
                if(confirm("Bu trip kaydÄ±nÄ± silmek istediÄŸine emin misin?")) {
                    try { await fb.deleteDoc(fb.doc(fb.db, 'omos_trips', id)); } catch (e) { console.error(e); }
                }
            };

            const randomReasons = [
                { r: "RÃ¼yamda beni aldattÄ±ÄŸÄ±nÄ± gÃ¶rdÃ¼m.", a: "Sabah uyanÄ±nca yÃ¼zÃ¼ne bakÄ±lmadÄ±, kapÄ±lar sert kapatÄ±ldÄ±." },
                { r: "Instagram'da o kÄ±zÄ±n fotosunu beÄŸenmiÅŸ.", a: "BÃ¼tÃ¼n fotoÄŸraflarÄ± arÅŸivlendi, biyografi silindi." },
                { r: "AcÄ±ktÄ±m ama ne yiyeceÄŸimi o da bilmiyor.", a: "'Sen beni hiÃ§ dÃ¼ÅŸÃ¼nmÃ¼yorsun' nutuÄŸu Ã§ekildi." },
                { r: "Bana 'sen bilirsin' dedi.", a: "KÄ±yamet koparÄ±ldÄ±." },
                { r: "Nefes alÄ±ÅŸÄ± Ã§ok gÃ¼rÃ¼ltÃ¼lÃ¼ydÃ¼.", a: "OdayÄ± terk etme eylemi gerÃ§ekleÅŸtirildi." }
            ];

            const handleRandomTrip = () => {
                const random = randomReasons[Math.floor(Math.random() * randomReasons.length)];
                setNewReason(random.r);
                setNewAction(random.a);
                setIntensity(Math.floor(Math.random() * 5) + 5);
                setSelectedMood(MOODS[Math.floor(Math.random() * MOODS.length)]);
            };

            // Ä°statistikler
            const totalTrips = trips.length;
            const resolvedTrips = trips.filter(t => t.resolved).length;
            const successRate = totalTrips > 0 ? Math.round((resolvedTrips / totalTrips) * 100) : 0;

            return (
                <div className="p-4 md:p-8 max-w-2xl mx-auto">
                    
                    {/* Header */}
                    <header className="text-center mb-8 relative z-10">
                        <div className="inline-block relative">
                            <div className="absolute -inset-1 bg-gradient-to-r from-rose-400 to-purple-400 rounded-full blur opacity-30 animate-pulse"></div>
                            <div className="relative bg-white/90 backdrop-blur-sm rounded-full p-4 shadow-lg border border-rose-100">
                                <Icons.HeartCrack className="w-12 h-12 text-rose-500" />
                            </div>
                        </div>
                        <h1 className="text-4xl font-black text-slate-800 mt-4 tracking-tight drop-shadow-sm">
                            Ã–moÅŸ <span className="text-transparent bg-clip-text bg-gradient-to-r from-rose-500 to-purple-600">Tripmatik</span>
                        </h1>
                        <p className="text-slate-500 font-medium mt-1">"Bulutlara yazÄ±lan sitemler, kalbe iÅŸleyen tripler..."</p>
                    </header>

                    {/* Ana Form KartÄ± */}
                    <div className="glass rounded-3xl shadow-xl shadow-rose-100/50 p-6 md:p-8 mb-8 relative z-10 transition-all hover:shadow-2xl hover:shadow-rose-200/50">
                        <div className="flex justify-between items-center mb-6">
                            <h2 className="text-xl font-bold text-slate-700 flex items-center gap-2">
                                <span className="bg-rose-100 p-2 rounded-xl text-rose-500"><Icons.Zap size={20} /></span>
                                Yeni Trip Ekle
                            </h2>
                            <button onClick={handleRandomTrip} className="text-xs bg-purple-50 text-purple-600 px-4 py-2 rounded-full font-bold hover:bg-purple-100 transition-colors flex items-center gap-1 border border-purple-100">
                                <Icons.Sparkles size={14} /> Otomatik Doldur
                            </button>
                        </div>

                        <div className="space-y-5">
                            {/* Mood Selector */}
                            <div>
                                <label className="block text-xs font-bold text-slate-400 mb-2 uppercase tracking-wide">Trip Modu</label>
                                <div className="flex gap-2 overflow-x-auto pb-2 scrollbar-hide">
                                    {MOODS.map(mood => (
                                        <button 
                                            key={mood.id}
                                            onClick={() => setSelectedMood(mood)}
                                            className={`flex flex-col items-center justify-center p-3 rounded-2xl border-2 transition-all min-w-[70px] ${selectedMood.id === mood.id ? 'border-rose-500 bg-rose-50 scale-105' : 'border-transparent bg-slate-50 hover:bg-slate-100 text-slate-400 grayscale hover:grayscale-0'}`}
                                        >
                                            <span className="text-2xl mb-1">{mood.emoji}</span>
                                            <span className="text-[10px] font-bold">{mood.label}</span>
                                        </button>
                                    ))}
                                </div>
                            </div>

                            <div className="grid md:grid-cols-2 gap-4">
                                <div className="md:col-span-2">
                                    <label className="block text-xs font-bold text-slate-400 mb-1 uppercase tracking-wide">Sebep</label>
                                    <textarea value={newReason} onChange={(e) => setNewReason(e.target.value)} placeholder="BugÃ¼n yine ne oldu?" className="w-full p-4 bg-slate-50/50 border border-slate-200 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-rose-300 focus:bg-white transition-all resize-none h-24" />
                                </div>
                                <div className="md:col-span-2">
                                    <label className="block text-xs font-bold text-slate-400 mb-1 uppercase tracking-wide">SonuÃ§ (Ceza)</label>
                                    <input type="text" value={newAction} onChange={(e) => setNewAction(e.target.value)} placeholder="Ã–rn: 3 saat sessizlik..." className="w-full p-4 bg-slate-50/50 border border-slate-200 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-rose-300 focus:bg-white transition-all" />
                                </div>
                            </div>

                            <div>
                                <div className="flex justify-between mb-2">
                                    <label className="text-xs font-bold text-slate-400 uppercase tracking-wide">Sinir Seviyesi</label>
                                    <span className="text-xs font-bold text-rose-500 bg-rose-100 px-2 py-0.5 rounded-md">{intensity} / 10</span>
                                </div>
                                <input type="range" min="1" max="10" value={intensity} onChange={(e) => setIntensity(Number(e.target.value))} className="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-rose-500" />
                            </div>

                            <button onClick={handleAddTrip} disabled={!newReason || !newAction} className="w-full bg-gradient-to-r from-rose-500 to-purple-600 hover:from-rose-600 hover:to-purple-700 disabled:opacity-50 text-white font-bold py-4 rounded-2xl transition-all shadow-lg shadow-rose-500/30 flex justify-center items-center gap-2 transform active:scale-[0.98]">
                                <Icons.Plus size={20} /> Kaydet ve YayÄ±nla
                            </button>
                        </div>
                    </div>

                    {/* Ä°statistikler */}
                    <div className="grid grid-cols-3 gap-3 mb-8">
                        <div className="glass p-4 rounded-2xl flex flex-col items-center justify-center text-center">
                            <span className="text-2xl font-black text-rose-500">{totalTrips}</span>
                            <span className="text-[10px] text-slate-400 font-bold uppercase mt-1">Toplam</span>
                        </div>
                        <div className="glass p-4 rounded-2xl flex flex-col items-center justify-center text-center">
                            <span className="text-2xl font-black text-purple-500">{resolvedTrips}</span>
                            <span className="text-[10px] text-slate-400 font-bold uppercase mt-1">Ã‡Ã¶zÃ¼len</span>
                        </div>
                        <div className="glass p-4 rounded-2xl flex flex-col items-center justify-center text-center relative overflow-hidden">
                             <div className="absolute inset-0 bg-green-50 opacity-50 z-0"></div>
                            <span className="text-2xl font-black text-emerald-500 relative z-10">%{successRate}</span>
                            <span className="text-[10px] text-slate-400 font-bold uppercase mt-1 relative z-10">BarÄ±ÅŸma</span>
                        </div>
                    </div>

                    {/* Liste */}
                    <div className="space-y-4 pb-20">
                        <h3 className="text-slate-500 font-bold ml-2 text-sm uppercase tracking-wider flex items-center gap-2">
                             <Icons.ChartPie size={16} /> Trip GeÃ§miÅŸi
                        </h3>
                        
                        {loading ? (
                            <div className="text-center py-12 text-rose-400 font-bold loading-dots">Veriler Buluttan Ä°niyor</div>
                        ) : trips.length === 0 ? (
                            <div className="glass text-center py-12 rounded-3xl border-2 border-dashed border-slate-200">
                                <Icons.Smile className="w-12 h-12 text-slate-300 mx-auto mb-2" />
                                <p className="text-slate-400 font-medium">Ä°nanÄ±lmaz! HiÃ§ trip yok.</p>
                                <p className="text-slate-300 text-xs mt-1">(FÄ±rtÄ±na Ã¶ncesi sessizlik olabilir)</p>
                            </div>
                        ) : (
                            trips.map((trip) => (
                                <div key={trip.id} className={`glass rounded-2xl p-5 transition-all hover:shadow-md relative group border-l-4 ${trip.resolved ? 'border-l-emerald-400 opacity-75 grayscale-[0.3]' : 'border-l-rose-500'}`}>
                                    
                                    <div className="flex justify-between items-start mb-2">
                                        <div className="flex items-center gap-2">
                                            {trip.mood && (
                                                <span className="text-2xl" title={trip.mood.label}>{trip.mood.emoji}</span>
                                            )}
                                            <span className="text-xs font-bold text-slate-400 bg-slate-100 px-2 py-1 rounded-lg">
                                                {trip.date}
                                            </span>
                                        </div>
                                        <div className="flex gap-2">
                                            {/* Resolve Button */}
                                            <button 
                                                onClick={() => toggleResolve(trip.id, trip.resolved)}
                                                className={`p-1.5 rounded-full transition-colors ${trip.resolved ? 'bg-emerald-100 text-emerald-600' : 'bg-slate-100 text-slate-400 hover:bg-emerald-100 hover:text-emerald-500'}`}
                                                title={trip.resolved ? "Ã‡Ã¶zÃ¼ldÃ¼" : "TatlÄ±ya BaÄŸla"}
                                            >
                                                <Icons.CheckCircle size={18} />
                                            </button>
                                            
                                            {/* Delete Button */}
                                            <button 
                                                onClick={() => handleDelete(trip.id)}
                                                className="p-1.5 rounded-full bg-slate-100 text-slate-400 hover:bg-red-100 hover:text-red-500 transition-colors"
                                            >
                                                <Icons.Trash2 size={18} />
                                            </button>
                                        </div>
                                    </div>

                                    <div className="pr-2 mt-2">
                                        <h4 className={`font-bold text-lg leading-tight mb-2 ${trip.resolved ? 'text-slate-500 line-through decoration-slate-300' : 'text-slate-800'}`}>
                                            "{trip.reason}"
                                        </h4>
                                        <div className={`p-3 rounded-xl text-sm ${trip.resolved ? 'bg-emerald-50/50 text-emerald-700' : 'bg-rose-50/50 text-rose-700'}`}>
                                            <span className="font-bold opacity-70">SonuÃ§: </span>
                                            {trip.action}
                                        </div>
                                    </div>

                                    {/* Intensity Indicator */}
                                    <div className="mt-3 flex items-center gap-2">
                                        <div className="flex-1 h-1.5 bg-slate-100 rounded-full overflow-hidden">
                                            <div 
                                                className={`h-full rounded-full ${trip.resolved ? 'bg-emerald-400' : 'bg-rose-500'}`} 
                                                style={{width: `${trip.intensity * 10}%`}}
                                            ></div>
                                        </div>
                                        <span className="text-[10px] font-bold text-slate-400">{trip.intensity}/10</span>
                                    </div>
                                    
                                    {trip.resolved && (
                                        <div className="absolute inset-0 flex items-center justify-center pointer-events-none opacity-0 group-hover:opacity-10 transition-opacity">
                                            <Icons.CheckCircle className="w-32 h-32 text-emerald-500" />
                                        </div>
                                    )}
                                </div>
                            ))
                        )}
                    </div>
                </div>
            );
        }

        const initApp = () => {
            const root = ReactDOM.createRoot(document.getElementById('root'));
            root.render(<App />);
        };

        if (window.Firebase) {
            initApp();
        } else {
            window.addEventListener('firebase-ready', initApp);
            setTimeout(() => { if (!window.Firebase) console.warn("Firebase gecikti..."); }, 3000);
        }
    </script>
</body>
</html>
