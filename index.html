<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ömoş Tripmatik</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React ve ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-pink-100 via-rose-50 to-purple-100 min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // İkon Bileşenleri (Lucide React yerine SVG kullanıyoruz)
        const Heart = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>
        );
        const HeartCrack = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/><path d="m12 13-3-3 2-2-1.5-1.5"/></svg>
        );
        const Plus = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M5 12h14"/><path d="M12 5v14"/></svg>
        );
        const Trash2 = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></svg>
        );
        const Zap = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
        );
        const AlertCircle = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></svg>
        );
        const Sparkles = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 3v4"/><path d="M3 5h4"/><path d="M3 9h4"/></svg>
        );

        function App() {
            // Başlangıç durumunu localStorage'dan alıyoruz
            const [trips, setTrips] = useState(() => {
                const savedTrips = localStorage.getItem('omos_trips');
                if (savedTrips) {
                    return JSON.parse(savedTrips);
                } else {
                    return [
                        {
                            id: 1,
                            reason: "Mesajıma 3 dakika 12 saniye geç cevap verdi.",
                            action: "Tek kelimelik cevaplar verildi. (Peki, Ok, Tm)",
                            date: new Date().toLocaleDateString('tr-TR'),
                            intensity: 3
                        }
                    ];
                }
            });

            const [newReason, setNewReason] = useState("");
            const [newAction, setNewAction] = useState("");
            const [intensity, setIntensity] = useState(5);

            // Trips değiştiğinde localStorage'ı güncelle
            useEffect(() => {
                localStorage.setItem('omos_trips', JSON.stringify(trips));
            }, [trips]);

            // Komik hazır tripler veritabanı
            const randomReasons = [
                { r: "Rüyamda beni aldattığını gördüm.", a: "Sabah uyanınca yüzüne bakılmadı, kapılar sert kapatıldı." },
                { r: "Instagram'da o kızın fotosunu beğenmiş.", a: "Bütün fotoğrafları arşivlendi, biyografi silindi." },
                { r: "Acıktım ama ne yiyeceğimi o da bilmiyor.", a: "'Sen beni hiç düşünmüyorsun' nutuğu çekildi." },
                { r: "Bana 'sen bilirsin' dedi.", a: "Kıyamet koparıldı." },
                { r: "Nefes alışı çok gürültülüydü.", a: "Odayı terk etme eylemi gerçekleştirildi." },
                { r: "Canım sıkıldı, kaos lazım.", a: "Eski defterler açıldı, 2019'daki hatası hatırlatıldı." },
                { r: "Giydiğim kazağı fark etmedi.", a: "Sessizlik yemini edildi." },
            ];

            const handleAddTrip = () => {
                if (!newReason || !newAction) return;
                
                const newTrip = {
                id: Date.now(),
                reason: newReason,
                action: newAction,
                date: new Date().toLocaleDateString('tr-TR'),
                intensity: intensity
                };

                setTrips([newTrip, ...trips]);
                setNewReason("");
                setNewAction("");
                setIntensity(5);
            };

            const handleRandomTrip = () => {
                const random = randomReasons[Math.floor(Math.random() * randomReasons.length)];
                setNewReason(random.r);
                setNewAction(random.a);
                setIntensity(Math.floor(Math.random() * 5) + 5); // 5-10 arası rastgele şiddet
            };

            const handleDelete = (id) => {
                setTrips(trips.filter(t => t.id !== id));
            };

            const getIntensityColor = (level) => {
                if (level <= 3) return "bg-blue-100 text-blue-700 border-blue-200";
                if (level <= 7) return "bg-orange-100 text-orange-700 border-orange-200";
                return "bg-red-100 text-red-700 border-red-200 animate-pulse";
            };

            return (
                <div className="p-4">
                <div className="max-w-md mx-auto space-y-6">
                    
                    {/* Header */}
                    <header className="text-center py-6 bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border border-pink-200 sticky top-4 z-10">
                    <div className="flex justify-center mb-2">
                        <HeartCrack className="w-12 h-12 text-rose-500 fill-rose-200" />
                    </div>
                    <h1 className="text-3xl font-black text-rose-600 tracking-tight">Ömoş Tripmatik</h1>
                    <p className="text-rose-400 font-medium text-sm mt-1">"Haklısın aşkım, sen haklısın."</p>
                    </header>

                    {/* Trip Oluşturucu Form */}
                    <div className="bg-white rounded-3xl shadow-lg p-6 border border-pink-100">
                    <div className="flex justify-between items-center mb-4">
                        <h2 className="text-lg font-bold text-slate-700 flex items-center gap-2">
                        <Sparkles className="w-5 h-5 text-yellow-500" />
                        Yeni Trip Yükle
                        </h2>
                        <button 
                        onClick={handleRandomTrip}
                        className="text-xs bg-purple-100 text-purple-600 px-3 py-1 rounded-full font-bold hover:bg-purple-200 transition-colors flex items-center gap-1"
                        >
                        <Zap size={14} /> Otomatik Üret
                        </button>
                    </div>

                    <div className="space-y-4">
                        <div>
                        <label className="block text-xs font-bold text-slate-400 mb-1 uppercase tracking-wide">Trip Sebebi</label>
                        <textarea 
                            value={newReason}
                            onChange={(e) => setNewReason(e.target.value)}
                            placeholder="Örn: Mesajıma 'ok' yazdı..."
                            className="w-full p-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-rose-300 resize-none h-20"
                        />
                        </div>

                        <div>
                        <label className="block text-xs font-bold text-slate-400 mb-1 uppercase tracking-wide">Uygulanan Tarife</label>
                        <input 
                            type="text"
                            value={newAction}
                            onChange={(e) => setNewAction(e.target.value)}
                            placeholder="Örn: 2 saat sessiz kalındı."
                            className="w-full p-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-rose-300"
                        />
                        </div>

                        <div>
                        <div className="flex justify-between mb-1">
                            <label className="text-xs font-bold text-slate-400 uppercase tracking-wide">Trip Şiddeti (1-10)</label>
                            <span className="text-xs font-bold text-rose-500">{intensity} / 10</span>
                        </div>
                        <input 
                            type="range" 
                            min="1" 
                            max="10" 
                            value={intensity} 
                            onChange={(e) => setIntensity(Number(e.target.value))}
                            className="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-rose-500"
                        />
                        </div>

                        <button 
                        onClick={handleAddTrip}
                        disabled={!newReason || !newAction}
                        className="w-full bg-rose-500 hover:bg-rose-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold py-3 rounded-xl transition-all shadow-md active:scale-95 flex justify-center items-center gap-2"
                        >
                        <Plus size={20} /> Listeye Ekle
                        </button>
                    </div>
                    </div>

                    {/* İstatistikler */}
                    <div className="grid grid-cols-2 gap-4">
                    <div className="bg-white p-4 rounded-2xl shadow-sm border border-pink-50 flex flex-col items-center">
                        <span className="text-3xl font-black text-rose-500">{trips.length}</span>
                        <span className="text-xs text-slate-400 font-bold uppercase">Toplam Trip</span>
                    </div>
                    <div className="bg-white p-4 rounded-2xl shadow-sm border border-pink-50 flex flex-col items-center">
                        <span className="text-3xl font-black text-purple-500">
                        {trips.length > 0 ? (trips.reduce((acc, curr) => acc + curr.intensity, 0) / trips.length).toFixed(1) : 0}
                        </span>
                        <span className="text-xs text-slate-400 font-bold uppercase">Ortalama Şiddet</span>
                    </div>
                    </div>

                    {/* Trip Listesi */}
                    <div className="space-y-4 pb-12">
                    <h3 className="text-slate-500 font-bold ml-2 text-sm">SON HAREKETLER</h3>
                    
                    {trips.length === 0 ? (
                        <div className="text-center py-10 bg-white/50 rounded-3xl border-2 border-dashed border-slate-200">
                        <Heart className="w-12 h-12 text-slate-200 mx-auto mb-2" />
                        <p className="text-slate-400 font-medium">Şimdilik her şey yolunda... <br/>(Fırtına öncesi sessizlik?)</p>
                        </div>
                    ) : (
                        trips.map((trip) => (
                        <div key={trip.id} className="bg-white rounded-2xl p-4 shadow-sm border border-slate-100 hover:shadow-md transition-shadow relative group">
                            <div className="absolute top-4 right-4 flex gap-2">
                            <span className={`text-[10px] font-bold px-2 py-1 rounded-full border ${getIntensityColor(trip.intensity)}`}>
                                Seviye: {trip.intensity}
                            </span>
                            </div>
                            
                            <div className="pr-16">
                            <div className="text-xs font-bold text-slate-400 mb-1 flex items-center gap-1">
                                <AlertCircle size={12} /> {trip.date}
                            </div>
                            <h4 className="font-bold text-slate-800 text-lg leading-tight mb-2">"{trip.reason}"</h4>
                            <div className="bg-slate-50 p-3 rounded-xl border border-slate-100">
                                <p className="text-slate-600 text-sm italic">
                                <span className="font-bold text-rose-400 not-italic">Sonuç: </span>
                                {trip.action}
                                </p>
                            </div>
                            </div>

                            <button 
                            onClick={() => handleDelete(trip.id)}
                            className="absolute bottom-4 right-4 p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-full transition-colors"
                            >
                            <Trash2 size={18} />
                            </button>
                        </div>
                        ))
                    )}
                    </div>

                </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
